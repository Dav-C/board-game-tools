{% load static %}
{% load widget_tweaks %}

{# resource groups and resources #}
<div id="resourceCreatedSuccessMessageWrapper" class="message-wrapper"></div>
<div id="resourceGroupsViewWrapper" class="tool-body">
    {% for resource_group in resource_groups %}
    <div class="resource-group-box">
        <form method="POST" action="{% url 'resource_group_update' resource_group.id %}"
              id="{{ resource_group.id }}-resourceGroupUpdateForm"
              data-id="{{ resource_group.id }}"
              class="resource-group-update-form">
            <div class="tool-title-box">
                {% csrf_token %}
                <div id="{{ resource_group.id }}-resourceGroupTitle" class="tool-title resource-group-title">{{ resource_group.title }}</div>
                <div id="{{ resource_group.id }}-resourceGroupTitleInput" class="tool-title no-display">
                    {{ resource_group_form.title|add_class:"tool-title-input"}}
                </div>
            </div>
        </form>
{# resource group control box #}
        <div class="resource-group-control-box">
            <button type="button" id="{{ resource_group.id }}-cancelResourceGroupTitleChangeBtn" class="cancel-change-btn">cancel</button>
            <form method="GET" action="" class="resource-group-produce-all-form">
                <button type="submit" class="resource-group-produce-all-btn">produce all</button>
            </form>
    {##}
    {#        {% if die_group.group_dice_sum %}#}
    {#            <div id="{{ die_group.id }}-dieGroupSum" class="die-group-sum-box">{{ die_group.group_dice_sum }}</div>#}
    {#        {% else %}#}
    {#            <div id="{{ die_group.id }}-dieGroupSum" class="die-group-sum-box"></div>#}
    {#        {% endif %}#}

            <button data-id="{{ die_group.id }}" class="resource-group-add-resource-open-form-btn">add</button>
            <button type="submit" id="{{ resource_group.id }}-confirmResourceGroupTitleChangeBtn" class="confirm-change-btn" form="{{ resource_group.id }}-resourceGroupUpdateForm">ok</button>
        </div>
{# delete resource group form #}
        <form action="{% url 'resource_group_delete' resource_group.id %}?next={{ request.get_full_path }}" method="POST" class="delete-tool-form">
            {% csrf_token %}
            <button id="{{ resource_group.id }}-resourceGroupDeleteBtn" class="delete-btn-large">delete this die group</button>
        </form>

        {% for resource in resource_group.resources.all %}
            <div class="resource-box">
                <div class="resource-name-box">{{ resource.name }}</div>
                <div class="resource-box-row">
                    <div class="resource-qty-box">{{ resource.quantity }}</div>
{#                    <Button class="resource-modifier-btn modifier-decrease">-</Button>#}
                    <div class="resource-modifier-box">x{{ resource.quantity }}</div>
{#                    <Button class="resource-modifier-btn modifier-increase">+</Button>#}
                </div>
            </div>
        {% empty %}
            <span class="large-text"><i>add some resources.</i></span>
        {% endfor %}
    </div>
    {% empty %}
    <span class="large-text"><i>no resources yet.</i></span>
    {% endfor %}
</div>